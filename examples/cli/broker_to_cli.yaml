---
# Receive the Solace broker and send it to the CLI
# Solace -> CLI
log:
  stdout_log_level: WARN

shared_config:
  - broker_config: &broker_connection
      broker_connection_share: ${SOLACE_BROKER_URL}
      broker_type: solace
      broker_url: ${SOLACE_BROKER_URL}
      broker_username: ${SOLACE_BROKER_USERNAME}
      broker_password: ${SOLACE_BROKER_PASSWORD}
      broker_vpn: ${SOLACE_BROKER_VPN}

# List of flows
flows:
  - name: input_flow
    components:

      # Input from a Solace broker
      - component_name: solace_sw_broker
        component_module: broker_input
        component_config: 
          <<: *broker_connection
          broker_queue_name: my_queue
          broker_subscriptions:
            - topic: my/topic1
              qos: 1
            - topic: llm/sota/chat/completion
              qos: 1
          payload_encoding: utf-8
          payload_format: text

      # Print it out to the CLI
      - component_name: cli_output
        component_module: stdout_output
        component_input:
          source_expression: input

